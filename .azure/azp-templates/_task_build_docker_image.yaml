parameters:
  contextDir: '<required>'
  dockerFile: '<required>'
  imageName: '<required>'
  imageVersion: '<required>'

steps:
# - script: docker build --rm -t '${{ parameters.imageName }}:latest' -f '${{ parameters.contextDir }}/${{ parameters.dockerFile }}' '${{ parameters.contextDir }}'
#   displayName: Build image
- task: Docker@2
  displayName: Build images
  inputs:
    command: build
    arguments: '--rm'
    buildContext: '${{ parameters.contextDir }}'
    Dockerfile: '${{ parameters.contextDir }}/${{ parameters.dockerFile }}'
    repository: '${{ parameters.imageName }}'
    tags: |
      ${{ parameters.imageVersion }}
      latest
